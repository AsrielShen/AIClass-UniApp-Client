{"version":3,"file":"create-course.js","sources":["pages/courses/create-course.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY291cnNlcy9jcmVhdGUtY291cnNlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view id=\"create-course\" class=\"bg-color\">\r\n\t\t<view class=\"create-block\">\r\n\t\t\t<block-bar-other title=\"创建课程\" />\r\n\t\t\t<view class=\"action-block\">\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t课程名\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"courseName\" class=\"input-box\" type=\"text\" placeholder=\"请输入课程名\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"detail-block\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t课程描述\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<textarea v-model=\"courseDes\" class=\"large-textarea\" type=\"text\" auto-height disable-default-padding\r\n\t\t\t\t\t\tplaceholder=\"请输入描述信息\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t学生名单\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"file-name\">{{fileName}}</view>\r\n\t\t\t\t\t<button class=\"upload-button\" @click=\"selectFile\">选择文件</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item tip-block\">\r\n\t\t\t\t\t提示：可选择提交格式为excel，首行元素分别为studentNumber,studentName\r\n\t\t\t\t</view>\r\n\t\t\t\t<button @click=\"formSubmit\" class=\"button\">提交</button>\r\n\t\t\t\t<button @click=\"formReset\" class=\"button red\">重置</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\"\r\nimport { globalData } from '@/utils/config.js'\r\n\r\nconst courseName = ref(\"\");\r\nconst courseDes = ref(\"\");\r\nconst fileName = ref(\"\");\r\nlet filePath = '';\r\nconst userInfo = uni.getStorageSync('userInfo');\r\n\r\nconst formSubmit = () => {\r\n\tuni.uploadFile({\r\n\t    url: globalData.baseUrl + \"/course/create\", // 你的后端接口\r\n\t    filePath: filePath,\r\n\t    name: 'file',\r\n\t    formData: {\r\n\t\t\tcourseName: courseName.value,\r\n\t\t\tdescription: courseDes.value,\r\n\t\t\ttoken: userInfo.token\r\n\t    },\r\n\t    success: (res) => {\r\n\t\t\tconst backData = JSON.parse(res.data);\r\n\t\t\tif (backData.code == 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"创建成功！\",\r\n\t\t\t\t\ticon: \"success\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"创建失败！\",\r\n\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t    },\r\n\t    fail: (err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"上传失败\",\r\n\t\t\t\ticon: \"error\"\r\n\t\t\t});\r\n\t    }\r\n\t  });\r\n}\r\nconst formReset = () => {\r\n\tfileName.value = \"\";\r\n\tfilePath = \"\";\r\n\tconsole.log(\"here is reset\");\r\n}\r\n\r\nconst selectFile = () => {\r\n\twx.chooseMessageFile({\r\n\t\tcount: 1,\r\n\t\ttype: 'file',\r\n\t\textension: ['.xls', '.xlsx'],\r\n\t\tsuccess: (res) => {\r\n\t\t\tconst file = res.tempFiles[0];\r\n\t\t\tconst isExcel = /\\.(xls|xlsx)$/i.test(file.name); // 判断文件类型是否为 Excel（.xls 或 .xlsx）\r\n\t\t\t\r\n\t\t\tif (isExcel) {\r\n\t\t\t\tfileName.value = file.name;\r\n\t\t\t\tfilePath = file.path;\r\n\t\t\t\tconsole.log(\"选择的文件是 Excel 文件:\", fileName);\r\n\t\t\t\tconsole.log(\"文件路径:\", filePath);\r\n\t\t\t} else {\r\n\t\t\t\twx.showToast({\r\n\t\t\t\t\ttitle: '请选择 Excel 文件',\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\tduration: 2000,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (err) => {\r\n\t\t\tconsole.error(\"选择文件失败：\", err);\r\n\t\t}\r\n\t});\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#create-course {\r\n\t.create-block {\r\n\t\t.action-block {\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t.action-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\r\n\t\t\t\t.input-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.file-name {\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tcolor: gray;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t/* 禁止换行 */\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t/* 超出部分隐藏 */\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t/* 超出部分显示省略号 */\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.upload-button {\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tborder-radius: 15rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\t\tborder: none\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.detail-block {\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\r\n\t\t\t\t.large-textarea {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmin-height: 250rpx;\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tpadding: 20rpx 15rpx;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\tborder: 1px solid #ccc;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.tip-block {\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: gray;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.button {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tmargin: 20rpx 0;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\tborder: none\r\n\t\t\t}\r\n\r\n\t\t\t.red {\r\n\t\t\t\tcolor: red;\r\n\t\t\t\tborder: 1rpx solid red;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/courses/create-course.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","globalData","wx"],"mappings":";;;;;;;;;;;;;;AAuCA,UAAM,aAAaA,cAAAA,IAAI,EAAE;AACzB,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,QAAI,WAAW;AACf,UAAM,WAAWC,cAAG,MAAC,eAAe,UAAU;AAE9C,UAAM,aAAa,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAKC,aAAAA,WAAW,UAAU;AAAA;AAAA,QAC1B;AAAA,QACA,MAAM;AAAA,QACN,UAAU;AAAA,UACZ,YAAY,WAAW;AAAA,UACvB,aAAa,UAAU;AAAA,UACvB,OAAO,SAAS;AAAA,QACb;AAAA,QACD,SAAS,CAAC,QAAQ;AACpB,gBAAM,WAAW,KAAK,MAAM,IAAI,IAAI;AACpC,cAAI,SAAS,QAAQ,GAAG;AACvBD,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD,OACI;AACJA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AAAA,QACE;AAAA,QACD,MAAM,CAAC,QAAQ;AACjBA,wBAAAA,MAAc,MAAA,SAAA,yCAAA,GAAG;AACjBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACV,CAAI;AAAA,QACE;AAAA,MACN,CAAI;AAAA,IACJ;AACA,UAAM,YAAY,MAAM;AACvB,eAAS,QAAQ;AACjB,iBAAW;AACXA,oBAAAA,4DAAY,eAAe;AAAA,IAC5B;AAEA,UAAM,aAAa,MAAM;AACxBE,oBAAAA,KAAG,kBAAkB;AAAA,QACpB,OAAO;AAAA,QACP,MAAM;AAAA,QACN,WAAW,CAAC,QAAQ,OAAO;AAAA,QAC3B,SAAS,CAAC,QAAQ;AACjB,gBAAM,OAAO,IAAI,UAAU,CAAC;AAC5B,gBAAM,UAAU,iBAAiB,KAAK,KAAK,IAAI;AAE/C,cAAI,SAAS;AACZ,qBAAS,QAAQ,KAAK;AACtB,uBAAW,KAAK;AAChBF,0BAAA,MAAA,MAAA,OAAA,yCAAY,oBAAoB,QAAQ;AACxCA,0BAAA,MAAA,MAAA,OAAA,yCAAY,SAAS,QAAQ;AAAA,UACjC,OAAU;AACNE,0BAAAA,KAAG,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YACf,CAAK;AAAA,UACD;AAAA,QACD;AAAA,QACD,MAAM,CAAC,QAAQ;AACdF,wBAAA,MAAA,MAAA,SAAA,0CAAc,WAAW,GAAG;AAAA,QAC5B;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;AC9GA,GAAG,WAAW,eAAe;"}