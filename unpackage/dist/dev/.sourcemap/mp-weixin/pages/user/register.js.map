{"version":3,"file":"register.js","sources":["pages/user/register.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9yZWdpc3Rlci52dWU"],"sourcesContent":["<template>\r\n\t<view id=\"register\" class=\"bg-color\">\r\n\t\t<view class=\"register-block\">\r\n\t\t\t<block-bar-other title=\"用户注册\" />\r\n\t\t\t<view class=\"action-block\">\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">用户学号</view>\r\n\t\t\t\t\t<input v-model=\"studentNumber\" class=\"input-box\" type=\"text\" placeholder=\"请用学号注册\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">用户密码</view>\r\n\t\t\t\t\t<input v-model=\"password\" class=\"input-box\" type=\"password\" placeholder=\"输入密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">确认密码</view>\r\n\t\t\t\t\t<input v-model=\"confirmPassword\" class=\"input-box\" type=\"password\" placeholder=\"确认密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">姓名</view>\r\n\t\t\t\t\t<input v-model=\"studentName\" class=\"input-box\" type=\"text\" placeholder=\"输入姓名\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">性别</view>\r\n\t\t\t\t\t<radio-group @change=\"selectGender\" class=\"radio-box\">\r\n\t\t\t\t\t\t<label class=\"radio-item\">\r\n\t\t\t\t\t\t\t<radio value=\"男\" :checked=\"gender === '男'\" color=\"#39c5bb\"\r\n\t\t\t\t\t\t\t\tstyle=\"transform:scale(0.7)\" />\r\n\t\t\t\t\t\t\t男\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label class=\"radio-item\">\r\n\t\t\t\t\t\t\t<radio value=\"女\" :checked=\"gender === '女'\" color=\"#39c5bb\"\r\n\t\t\t\t\t\t\t\tstyle=\"transform:scale(0.7)\" />\r\n\t\t\t\t\t\t\t女\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</radio-group>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">年级</view>\r\n\t\t\t\t\t<picker  @change=\"pickerChange\" mode=\"date\" fields=\"year\" class=\"picker-box\">\r\n\t\t\t\t\t\t<text v-if=\"grade\">{{ grade }}级</text>\r\n\t\t\t\t\t\t<text v-else style=\"color: #666;\">请选择入学年份</text>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">学院</view>\r\n\t\t\t\t\t<input v-model=\"department\" class=\"input-box\" type=\"text\" placeholder=\"输入所在学院\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">专业</view>\r\n\t\t\t\t\t<input v-model=\"major\" class=\"input-box\" type=\"text\" placeholder=\"输入所在专业\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">电话</view>\r\n\t\t\t\t\t<input v-model=\"phone\" class=\"input-box\" type=\"text\" placeholder=\"输入联系电话\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item tip-block\">\r\n\t\t\t\t\t提示：若已注册账号，请\r\n\t\t\t\t\t<navigator url=\"/pages/user/login\" style=\"color: #39c5bb;\">登录</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button @click=\"register\" class=\"button\">注册</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\nimport { ref } from 'vue'\nimport { globalData } from '@/utils/config.js'\n\n// 双向绑定的数据\nconst studentNumber = ref('')\nconst password = ref('')\nconst confirmPassword = ref('')\nconst studentName = ref('')\nconst gender = ref('男')\nconst grade = ref('')\nconst department = ref('')\nconst major = ref('')\nconst phone = ref('')\nconst role = ref('student')\n\n// 选择性别\nconst selectGender = (e) => {\n\tgender.value = e.detail.value\n}\r\n\r\nconst pickerChange = (e) => {\r\n\tgrade.value = parseInt(e.detail.value);\r\n}\r\n\r\n\nconst register = () => {\t\n\tif (!studentNumber.value || !password.value ||\r\n\t\t!confirmPassword.value || !studentName.value ||\r\n\t\t!department.value || !major.value || !phone.value) {\n\t\tuni.showToast({\n\t\t\ttitle: '请完整填写所有信息',\n\t\t\ticon: 'error'\n\t\t})\n\t\treturn\n\t  }\n\n\tif (password.value !== confirmPassword.value) {\n\t\tuni.showToast({\n\t\t\ttitle: '密码和确认密码不一致',\n\t\t\ticon: 'error'\n\t\t})\n\t\treturn\n\t}\n\n  // 发起请求\n  uni.request({\n    url: globalData.baseUrl + '/auth/register/student',\n    method: 'POST',\n    data: {\n\t\tstudentNumber: studentNumber.value,\r\n\t\tstudentName: studentName.value,\n\t\tpassword: password.value,\n\t\tgender: gender.value,\r\n\t\tdepartment: department.value,\r\n\t\tmajor: major.value,\n\t\tgrade: grade.value,\n\t\tphone: phone.value,\n\t\trole: role.value,\r\n\t\topenid: null\n    },\n    header: {\n      'Content-Type': 'application/json'\n    },\n    success: (res) => {\n\t\tconst data = res.data\r\n\t\tif (data.code === 0) {\r\n\t\t\tuni.setStorageSync('userInfo', {\r\n\t\t\t\tuserId: data.data.userId,\r\n\t\t\t\tuserNumber: data.data.userNumber,\r\n\t\t\t\tuserName: data.data.userName,\r\n\t\t\t\trole: data.data.role,\r\n\t\t\t\ttoken: data.data.token\r\n\t\t\t});\r\n      \t\r\n\t\t\tuni.showToast({ title: '注册成功', icon: 'success' });\r\n\t\t\t// 登录成功后跳转到 index 页面\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/index/index'\r\n\t\t\t});\r\n      \t\r\n\t\t} else {\r\n\t\t\tuni.showToast({ title: data.msg || \"注册失败！\", icon: 'error' });\r\n\t\t}\n    },\n    fail: (err) => {\n      uni.showToast({\n        title: '网络错误',\n        icon: 'error'\n      })\n      console.log(err)\n    }\n  })\n}\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t#register {\r\n\t\t.register-block {\r\n\t\t\t.action-block {\r\n\t\t\t\tmargin: 20rpx 0;\r\n\t\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t\t.action-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\r\n\t\t\t\t\t.input-box {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.radio-box {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tmargin: 0 20rpx;\r\n\r\n\t\t\t\t\t\t.radio-item {\r\n\t\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.picker-box {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tip-block {\r\n\t\t\t\t\tborder: 0;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: gray;\r\n\r\n\t\t\t\t\t.blue {\r\n\t\t\t\t\t\tmargin-left: 5rpx;\r\n\t\t\t\t\t\tcolor: #39c5bb;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.button {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 10rpx 0;\r\n\t\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\t\tborder: none\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/user/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","globalData"],"mappings":";;;;;;;;;;;;;;AAsEA,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAC5B,UAAM,WAAWA,cAAG,IAAC,EAAE;AACvB,UAAM,kBAAkBA,cAAG,IAAC,EAAE;AAC9B,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,SAASA,cAAG,IAAC,GAAG;AACtB,UAAM,QAAQA,cAAG,IAAC,EAAE;AACpB,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,QAAQA,cAAG,IAAC,EAAE;AACpB,UAAM,QAAQA,cAAG,IAAC,EAAE;AACpB,UAAM,OAAOA,cAAG,IAAC,SAAS;AAG1B,UAAM,eAAe,CAAC,MAAM;AAC3B,aAAO,QAAQ,EAAE,OAAO;AAAA,IACzB;AAEA,UAAM,eAAe,CAAC,MAAM;AAC3B,YAAM,QAAQ,SAAS,EAAE,OAAO,KAAK;AAAA,IACtC;AAGA,UAAM,WAAW,MAAM;AACtB,UAAI,CAAC,cAAc,SAAS,CAAC,SAAS,SACrC,CAAC,gBAAgB,SAAS,CAAC,YAAY,SACvC,CAAC,WAAW,SAAS,CAAC,MAAM,SAAS,CAAC,MAAM,OAAO;AACnDC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACE;AAEH,UAAI,SAAS,UAAU,gBAAgB,OAAO;AAC7CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACA;AAGAA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAKC,aAAAA,WAAW,UAAU;AAAA,QAC1B,QAAQ;AAAA,QACR,MAAM;AAAA,UACR,eAAe,cAAc;AAAA,UAC7B,aAAa,YAAY;AAAA,UACzB,UAAU,SAAS;AAAA,UACnB,QAAQ,OAAO;AAAA,UACf,YAAY,WAAW;AAAA,UACvB,OAAO,MAAM;AAAA,UACb,OAAO,MAAM;AAAA,UACb,OAAO,MAAM;AAAA,UACb,MAAM,KAAK;AAAA,UACX,QAAQ;AAAA,QACL;AAAA,QACD,QAAQ;AAAA,UACN,gBAAgB;AAAA,QACjB;AAAA,QACD,SAAS,CAAC,QAAQ;AACpB,gBAAM,OAAO,IAAI;AACjB,cAAI,KAAK,SAAS,GAAG;AACpBD,0BAAG,MAAC,eAAe,YAAY;AAAA,cAC9B,QAAQ,KAAK,KAAK;AAAA,cAClB,YAAY,KAAK,KAAK;AAAA,cACtB,UAAU,KAAK,KAAK;AAAA,cACpB,MAAM,KAAK,KAAK;AAAA,cAChB,OAAO,KAAK,KAAK;AAAA,YACrB,CAAI;AAEDA,0BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAEhDA,0BAAAA,MAAI,UAAU;AAAA,cACb,KAAK;AAAA,YACT,CAAI;AAAA,UAEJ,OAAS;AACNA,gCAAI,UAAU,EAAE,OAAO,KAAK,OAAO,SAAS,MAAM,QAAO,CAAE;AAAA,UAC3D;AAAA,QACE;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AACDA,wBAAAA,MAAY,MAAA,OAAA,kCAAA,GAAG;AAAA,QAChB;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7JA,GAAG,WAAW,eAAe;"}