{"version":3,"file":"modify-password.js","sources":["pages/user/modify-password.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9tb2RpZnktcGFzc3dvcmQudnVl"],"sourcesContent":["<template>\r\n\t<view id=\"register\" class=\"bg-color\">\r\n\t\t<view class=\"register-block\">\r\n\t\t\t<block-bar-other title=\"修改密码\" />\r\n\t\t\t<view class=\"action-block\">\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">旧密码</view>\r\n\t\t\t\t\t<input v-model=\"password.old\" class=\"input-box\" type=\"password\" placeholder=\"输入当前密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">新的密码</view>\r\n\t\t\t\t\t<input v-model=\"password.new\" class=\"input-box\" type=\"password\" placeholder=\"输入新密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">确认密码</view>\r\n\t\t\t\t\t<input v-model=\"password.confirm\" class=\"input-box\" type=\"password\" placeholder=\"请确认新密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<button @click=\"modify\" class=\"button\">提交</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\nimport { ref } from 'vue'\nimport { globalData } from '@/utils/config.js'\n\nconst password = ref({\r\n\told: '',\r\n\tnew: '',\r\n\tconfirm: ''\r\n})\n\r\nconst userInfo = uni.getStorageSync('userInfo');\r\n\nconst modify = () => {\r\n\tconsole.log(password.value);\r\n\tif(password.value.old == password.value.new) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: \"旧密码和新密码相同\",\r\n\t\t\ticon: \"error\"\r\n\t\t});\r\n\t\treturn ;\r\n\t}\r\n\telse if(password.value.new != password.value.confirm) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: \"确认密码与新密码不同\",\r\n\t\t\ticon: \"error\"\r\n\t\t});\r\n\t\treturn ;\r\n\t}\r\n\tuni.request({\r\n\t\turl: globalData.baseUrl + '/user/modify/password/' + userInfo.token,\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\toldPassword: password.value.old,\r\n\t\t\tnewPassword: password.value.new,\r\n\t\t\tconfirmPassword: password.value.confirm\r\n\t\t},\r\n\t\theader: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tsuccess: (res) => {\r\n\t\t\tconst backData = res.data;\r\n\t\t\tif(backData.code === 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"修改成功，重新登录\",\r\n\t\t\t\t\ticon: \"success\"\r\n\t\t\t\t});\r\n\t\t\t\t// 清除本地存储的用户信息\r\n\t\t\t\tuni.removeStorageSync('userInfo');\r\n\t\t\t\t// 跳转到登录页面\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t    url: '/pages/user/login'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if(backData.code === 1) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"密码错误\",\r\n\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t});\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"认证错误，请重新登录\",\r\n\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t});\r\n\t\t\t\tuni.removeStorageSync(\"userInfo\");\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t    url: \"/pages/user/login\" \r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (e)=> {\r\n\t\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t\t}\r\n\t})\n}\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#register {\r\n\t.register-block {\r\n\t\t.action-block {\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t.action-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\r\n\t\t\t\ttext,.input-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.button {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tmargin: 10rpx 0;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\tborder: none\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/user/modify-password.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","globalData"],"mappings":";;;;;;;;;;;;;;AA2BA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACpB,KAAK;AAAA,MACL,KAAK;AAAA,MACL,SAAS;AAAA,IACV,CAAC;AAED,UAAM,WAAWC,cAAG,MAAC,eAAe,UAAU;AAE9C,UAAM,SAAS,MAAM;AACpBA,+EAAY,SAAS,KAAK;AAC1B,UAAG,SAAS,MAAM,OAAO,SAAS,MAAM,KAAK;AAC5CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACA,WACO,SAAS,MAAM,OAAO,SAAS,MAAM,SAAS;AACrDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACA;AACDA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKC,aAAAA,WAAW,UAAU,2BAA2B,SAAS;AAAA,QAC9D,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,aAAa,SAAS,MAAM;AAAA,UAC5B,aAAa,SAAS,MAAM;AAAA,UAC5B,iBAAiB,SAAS,MAAM;AAAA,QAChC;AAAA,QACD,QAAQ;AAAA,UACP,gBAAgB;AAAA,QAChB;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,gBAAM,WAAW,IAAI;AACrB,cAAG,SAAS,SAAS,GAAG;AACvBD,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAEDA,gCAAI,kBAAkB,UAAU;AAEhCA,0BAAAA,MAAI,WAAW;AAAA,cACX,KAAK;AAAA,YACb,CAAK;AAAA,UACD,WACO,SAAS,SAAS,GAAG;AAC5BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD,OACI;AACJA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AACDA,gCAAI,kBAAkB,UAAU;AAChCA,0BAAAA,MAAI,WAAW;AAAA,cACX,KAAK;AAAA,YACb,CAAK;AAAA,UACD;AAAA,QACD;AAAA,QACD,MAAM,CAAC,MAAK;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,SAAS;AAAA,QAC9C;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;AChGA,GAAG,WAAW,eAAe;"}