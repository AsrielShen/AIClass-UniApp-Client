{"version":3,"file":"modify-student.js","sources":["pages/user/modify-student.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9tb2RpZnktc3R1ZGVudC52dWU"],"sourcesContent":["<template>\r\n\t<view id=\"register\" class=\"bg-color\">\r\n\t\t<view class=\"register-block\">\r\n\t\t\t<block-bar-other title=\"修改个人信息\" />\r\n\t\t\t<view class=\"action-block\">\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">学号/工号</view>\r\n\t\t\t\t\t<text>{{student.studentNumber}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">姓名</view>\r\n\t\t\t\t\t<text>{{student.studentName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">性别</view>\r\n\t\t\t\t\t<radio-group @change=\"selectGender\" class=\"radio-box\">\r\n\t\t\t\t\t\t<label class=\"radio-item\">\r\n\t\t\t\t\t\t\t<radio value=\"男\" :checked=\"student.gender === '男'\" color=\"#39c5bb\"\r\n\t\t\t\t\t\t\t\tstyle=\"transform:scale(0.7)\" />\r\n\t\t\t\t\t\t\t男\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label class=\"radio-item\">\r\n\t\t\t\t\t\t\t<radio value=\"女\" :checked=\"student.gender === '女'\" color=\"#39c5bb\"\r\n\t\t\t\t\t\t\t\tstyle=\"transform:scale(0.7)\" />\r\n\t\t\t\t\t\t\t女\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</radio-group>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">年级</view>\r\n\t\t\t\t\t<picker  @change=\"pickerChange\" mode=\"date\" fields=\"year\" class=\"picker-box\">\r\n\t\t\t\t\t\t<text v-if=\"student.grade\">{{ student.grade }}级</text>\r\n\t\t\t\t\t\t<text v-else style=\"color: #666;\">请选择入学年份</text>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">学院</view>\r\n\t\t\t\t\t<input v-model=\"student.department\" class=\"input-box\" type=\"text\" placeholder=\"输入所在学院\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">专业</view>\r\n\t\t\t\t\t<input v-model=\"student.major\" class=\"input-box\" type=\"text\" placeholder=\"输入所在专业\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">电话</view>\r\n\t\t\t\t\t<input v-model=\"student.phone\" class=\"input-box\" type=\"text\" placeholder=\"输入联系电话\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<button @click=\"modify\" class=\"button\">提交</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\nimport { ref } from 'vue'\nimport { globalData } from '@/utils/config.js'\n\nconst student = ref({});\n\n// 选择性别\nconst selectGender = (e) => {\n\tstudent.value.gender = e.detail.value\n}\r\n\r\nconst pickerChange = (e) => {\r\n\tstudent.value.grade = parseInt(e.detail.value);\r\n}\r\n\r\nconst userInfo = uni.getStorageSync('userInfo');\r\nuni.request({\r\n\turl: globalData.baseUrl + '/user/getInfo/' + userInfo.token,\r\n\theader: {\r\n\t\t'Content-Type': 'application/json'\r\n\t},\r\n\tsuccess: (res) => {\r\n\t\tconst backData = res.data;\r\n\t\tif(backData.code === 0) {\r\n\t\t\tstudent.value = backData.data;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"认证错误，请重新登录\",\r\n\t\t\t\ticon: \"error\"\r\n\t\t\t});\r\n\t\t\tuni.removeStorageSync(\"userInfo\");\r\n\t\t\tuni.redirectTo({\r\n\t\t\t    url: \"/pages/user/login\" \r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tfail: (e)=> {\r\n\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t}\r\n})\r\n\nconst modify = () => {\t\r\n\tuni.request({\r\n\t\turl: globalData.baseUrl + '/user/modify/student/' + userInfo.token,\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\tgender: student.value.gender,\r\n\t\t\tdepartment: student.value.department,\r\n\t\t\tmajor: student.value.major,\r\n\t\t\tgrade: student.value.grade,\r\n\t\t\tphone: student.value.phone,\r\n\t\t},\r\n\t\theader: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tsuccess: (res) => {\r\n\t\t\tconst backData = res.data;\r\n\t\t\tif(backData.code === 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"修改成功\",\r\n\t\t\t\t\ticon: \"success\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"认证错误，请重新登录\",\r\n\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t});\r\n\t\t\t\tuni.removeStorageSync(\"userInfo\");\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t    url: \"/pages/user/login\" \r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (e)=> {\r\n\t\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t\t}\r\n\t})\r\n\t\n}\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#register {\r\n\t.register-block {\r\n\t\t.action-block {\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t.action-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\r\n\t\t\t\ttext,.input-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.radio-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\r\n\t\t\t\t\t.radio-item {\r\n\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.picker-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.tip-block {\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: gray;\r\n\r\n\t\t\t\t.blue {\r\n\t\t\t\t\tmargin-left: 5rpx;\r\n\t\t\t\t\tcolor: #39c5bb;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.button {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tmargin: 10rpx 0;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\tborder: none\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/user/modify-student.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","globalData"],"mappings":";;;;;;;;;;;;;;AAyDA,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AAGtB,UAAM,eAAe,CAAC,MAAM;AAC3B,cAAQ,MAAM,SAAS,EAAE,OAAO;AAAA,IACjC;AAEA,UAAM,eAAe,CAAC,MAAM;AAC3B,cAAQ,MAAM,QAAQ,SAAS,EAAE,OAAO,KAAK;AAAA,IAC9C;AAEA,UAAM,WAAWC,cAAG,MAAC,eAAe,UAAU;AAC9CA,kBAAG,MAAC,QAAQ;AAAA,MACX,KAAKC,aAAAA,WAAW,UAAU,mBAAmB,SAAS;AAAA,MACtD,QAAQ;AAAA,QACP,gBAAgB;AAAA,MAChB;AAAA,MACD,SAAS,CAAC,QAAQ;AACjB,cAAM,WAAW,IAAI;AACrB,YAAG,SAAS,SAAS,GAAG;AACvB,kBAAQ,QAAQ,SAAS;AAAA,QACzB,OACI;AACJD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACV,CAAI;AACDA,8BAAI,kBAAkB,UAAU;AAChCA,wBAAAA,MAAI,WAAW;AAAA,YACX,KAAK;AAAA,UACZ,CAAI;AAAA,QACD;AAAA,MACD;AAAA,MACD,MAAM,CAAC,MAAK;AACXA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,SAAS;AAAA,MAC9C;AAAA,IACF,CAAC;AAED,UAAM,SAAS,MAAM;AACpBA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKC,aAAAA,WAAW,UAAU,0BAA0B,SAAS;AAAA,QAC7D,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,QAAQ,QAAQ,MAAM;AAAA,UACtB,YAAY,QAAQ,MAAM;AAAA,UAC1B,OAAO,QAAQ,MAAM;AAAA,UACrB,OAAO,QAAQ,MAAM;AAAA,UACrB,OAAO,QAAQ,MAAM;AAAA,QACrB;AAAA,QACD,QAAQ;AAAA,UACP,gBAAgB;AAAA,QAChB;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,gBAAM,WAAW,IAAI;AACrB,cAAG,SAAS,SAAS,GAAG;AACvBD,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD,OACI;AACJA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AACDA,gCAAI,kBAAkB,UAAU;AAChCA,0BAAAA,MAAI,WAAW;AAAA,cACX,KAAK;AAAA,YACb,CAAK;AAAA,UACD;AAAA,QACD;AAAA,QACD,MAAM,CAAC,MAAK;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,SAAS;AAAA,QAC9C;AAAA,MACH,CAAE;AAAA,IAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA,GAAG,WAAW,eAAe;"}