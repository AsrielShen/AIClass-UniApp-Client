{"version":3,"file":"login.js","sources":["pages/user/login.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9sb2dpbi52dWU"],"sourcesContent":["<template>\r\n\t<view id=\"login\" class=\"bg-color\">\r\n\t\t<view class=\"login-block\">\r\n\t\t\t<block-bar-other title=\"用户登录\" />\r\n\t\t\t<view class=\"action-block\">\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">学号</view>\r\n\t\t\t\t\t<input v-model=\"userNumber\" class=\"input-box\" type=\"text\" placeholder=\"输入学号\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\">\r\n\t\t\t\t\t<view class=\"title\">密码</view>\r\n\t\t\t\t\t<input v-model=\"password\" class=\"input-box\" type=\"password\" placeholder=\"输入密码\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item tip-block\">\r\n\t\t\t\t\t提示：若未注册账号，请\r\n\t\t\t\t\t<navigator url=\"/pages/user/register\" style=\"color: #39c5bb;\">注册</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button @click=\"login\" class=\"button\">登录</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\nimport { globalData } from '@/utils/config.js'\r\n\n// 双向绑定数据\nconst userNumber = ref('')\nconst password = ref('')\n\n// 登录方法\nconst login = () => {\r\n\tif (!userNumber.value || !password.value) {\r\n\t    uni.showToast({\r\n\t\t\ttitle: '请输入学号和密码',\r\n\t\t\ticon: 'error'\r\n\t    });\r\n\t\treturn ;\r\n\t}\r\n\t\n\tuni.request({\r\n\t\turl: globalData.baseUrl + '/auth/login',\r\n\t\tmethod: 'POST',\r\n\t\tdata: {\r\n\t\t\tuserNumber: userNumber.value,\r\n\t\t\tpassword: password.value,\r\n\t\t\topenid: null\r\n\t\t},\r\n\t\theader: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tsuccess: (res) => {\r\n\t\t\tconst data = res.data\r\n\t\t\tif (data.code === 0) {\r\n\t\t\t\tuni.setStorageSync('userInfo', {\r\n\t\t\t\t\tuserId: data.data.userId,\r\n\t\t\t\t\tuserNumber: data.data.userNumber,\r\n\t\t\t\t\tuserName: data.data.userName,\r\n\t\t\t\t\trole: data.data.role,\r\n\t\t\t\t\ttoken: data.data.token,\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({ title: '登录成功', icon: 'success' });\r\n\t\t\t\t// 登录成功后跳转到 index 页面\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({ title: data.msg || \"登录异常\", icon: 'error' });\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (e)=> {\r\n\t\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t\t}\r\n\t})\n}\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#login {\r\n\t.login-block {\r\n\t\t.action-block {\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tpadding: 10rpx 30rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\t.action-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\t\t\t\t.input-box {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.tip-block {\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: gray;\r\n\t\t\t}\r\n\t\t\t.button {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tmargin: 10rpx 0;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\tborder: none\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/user/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","globalData"],"mappings":";;;;;;;;;;;;;;AA4BA,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,WAAWA,cAAG,IAAC,EAAE;AAGvB,UAAM,QAAQ,MAAM;AACnB,UAAI,CAAC,WAAW,SAAS,CAAC,SAAS,OAAO;AACtCC,sBAAAA,MAAI,UAAU;AAAA,UAChB,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAM;AACJ;AAAA,MACA;AAEDA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKC,aAAAA,WAAW,UAAU;AAAA,QAC1B,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,YAAY,WAAW;AAAA,UACvB,UAAU,SAAS;AAAA,UACnB,QAAQ;AAAA,QACR;AAAA,QACD,QAAQ;AAAA,UACP,gBAAgB;AAAA,QAChB;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,gBAAM,OAAO,IAAI;AACjB,cAAI,KAAK,SAAS,GAAG;AACpBD,0BAAG,MAAC,eAAe,YAAY;AAAA,cAC9B,QAAQ,KAAK,KAAK;AAAA,cAClB,YAAY,KAAK,KAAK;AAAA,cACtB,UAAU,KAAK,KAAK;AAAA,cACpB,MAAM,KAAK,KAAK;AAAA,cAChB,OAAO,KAAK,KAAK;AAAA,YACtB,CAAK;AAEDA,0BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAEhDA,0BAAAA,MAAI,UAAU;AAAA,cACb,KAAK;AAAA,YACV,CAAK;AAAA,UAEL,OAAU;AACNA,gCAAI,UAAU,EAAE,OAAO,KAAK,OAAO,QAAQ,MAAM,QAAO,CAAE;AAAA,UAC1D;AAAA,QACD;AAAA,QACD,MAAM,CAAC,MAAK;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,SAAS;AAAA,QAC9C;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;AC5EA,GAAG,WAAW,eAAe;"}