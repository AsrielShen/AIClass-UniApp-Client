{"version":3,"file":"ai-help.js","sources":["pages/ai/ai-help.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWkvYWktaGVscC52dWU"],"sourcesContent":["<template>\r\n\t<view id=\"ai-help\" class=\"bg-color\">\r\n\t\t<view class=\"chat-box\">\r\n\t\t\t<view v-for=\"(item, index) in chatHistory\" :key=\"index\" class=\"chat-item\">\r\n\t\t\t\t<view v-if=\"item.type === 'ai'\" class=\"ai-question\">\r\n\t\t\t\t\t<view v-html=\"renderMarkdown(item.message)\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"item.type === 'user'\" class=\"user-answer\">\r\n\t\t\t\t\t<text>{{ item.message }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 用户输入框 -->\r\n\t\t<view class=\"input-box\">\r\n\t\t\t<input v-model=\"userInput\" placeholder=\"请输入问题...\" class=\"input\" />\r\n\t\t\t<button @click=\"sendMessage\" class=\"send-btn\">发送</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { globalData } from '@/utils/config.js'\r\nimport MarkdownIt from 'markdown-it';\r\n\r\n\r\nconst userInput = ref('');\r\nconst chatHistory = ref([\r\n\t{\r\n\t\ttype: 'ai',\r\n\t\tmessage: '**您好！** 这里是ai问答'\r\n\t}\r\n]);\r\n\r\n// 实例化 markdown-it\r\nconst md = new MarkdownIt();\r\n\r\n// 渲染Markdown格式\r\nconst renderMarkdown = (markdownText) => {\r\n\treturn md.render(markdownText);\r\n}\r\n\r\n// 发送用户消息\r\nconst sendMessage = () => {\r\n\tif (userInput.value.trim() === '') return;\r\n\r\n\t// 添加用户消息到对话记录\r\n\tchatHistory.value.push({\r\n\t\ttype: 'user',\r\n\t\tmessage: userInput.value\r\n\t});\r\n\t// 清空输入框\r\n\tconst message = userInput.value;\r\n\tuserInput.value = '';\r\n\r\n\tuni.request({\r\n\t\turl: globalData.baseUrl + '/ai/generate/',\r\n\t\tmethod: 'POST',\r\n\t\tdata: message,\r\n\t\theader: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tsuccess: (res) => {\r\n\t\t\tconst backData = res.data;\r\n\t\t\tconsole.log(backData);\r\n\t\t\tif(backData.code === 0) {\r\n\t\t\t\t// 返回AI 回答\r\n\t\t\t\tconst aiResponse = backData.data.generatedText;\r\n\t\t\t\t// 添加 AI 消息到对话记录\r\n\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\tmessage: aiResponse\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"生成失败！\",\r\n\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (e)=> {\r\n\t\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t\t}\r\n\t})\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#ai-help {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\t.chat-box {\r\n\t\tflex: 1;\r\n\t\tpadding: 30rpx;\r\n\t\toverflow-y: scroll;\r\n\t\t.chat-item {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.ai-question {\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t\tborder-radius: 8px;\r\n\t\t\t\tborder: 1rpx solid #ccc;\r\n\t\t\t}\r\n\r\n\t\t\t.user-answer {\r\n\t\t\t\tbackground-color: #39c5bb;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t\tborder-radius: 8px;\r\n\t\t\t\tborder: 1rpx solid #ccc;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.input-box {\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: 1rpx solid #cbcbcb;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.input {\r\n\t\t\tflex: 1;\r\n\t\t\tline-height: 60rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tborder: 1px solid #ccc;\r\n\t\t\tborder-radius: 10px;\r\n\t\t}\r\n\r\n\t\t.send-btn {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 60rpx;\r\n\t\t\tfont-size: 25rpx;\r\n\t\t\tline-height: 60rpx;\r\n\t\t\tmargin-left: 30rpx;\r\n\t\t\tcolor: white;\r\n\t\t\tborder-radius: 8px;\r\n\t\t\tbackground-color: #39c5bb;\r\n\t\t}\r\n\t}\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/ai/ai-help.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","MarkdownIt","uni","globalData"],"mappings":";;;;;;AA0BA,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,cAAcA,cAAAA,IAAI;AAAA,MACvB;AAAA,QACC,MAAM;AAAA,QACN,SAAS;AAAA,MACT;AAAA,IACF,CAAC;AAGD,UAAM,KAAK,IAAIC,cAAAA;AAGf,UAAM,iBAAiB,CAAC,iBAAiB;AACxC,aAAO,GAAG,OAAO,YAAY;AAAA,IAC9B;AAGA,UAAM,cAAc,MAAM;AACzB,UAAI,UAAU,MAAM,KAAM,MAAK;AAAI;AAGnC,kBAAY,MAAM,KAAK;AAAA,QACtB,MAAM;AAAA,QACN,SAAS,UAAU;AAAA,MACrB,CAAE;AAED,YAAM,UAAU,UAAU;AAC1B,gBAAU,QAAQ;AAElBC,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKC,aAAAA,WAAW,UAAU;AAAA,QAC1B,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,QAAQ;AAAA,UACP,gBAAgB;AAAA,QAChB;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,gBAAM,WAAW,IAAI;AACrBD,wBAAAA,MAAY,MAAA,OAAA,8BAAA,QAAQ;AACpB,cAAG,SAAS,SAAS,GAAG;AAEvB,kBAAM,aAAa,SAAS,KAAK;AAEjC,wBAAY,MAAM,KAAK;AAAA,cACtB,MAAM;AAAA,cACN,SAAS;AAAA,YACd,CAAK;AAAA,UACD,OACI;AACJA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AAAA,QACD;AAAA,QACD,MAAM,CAAC,MAAK;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,SAAS;AAAA,QAC9C;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;ACpFA,GAAG,WAAW,eAAe;"}