{"version":3,"names":["user","common_vendor","ref","userInfo","index","getStorageSync","request","url","utils_config","globalData","baseUrl","token","header","success","res","backData","data","code","value","showToast","title","icon","removeStorageSync","redirectTo","fail","e","logout","gotoPageModifyInfo","role","navigateTo","gotoPageModifyPassword","wx","createPage","MiniProgramPage"],"sources":["user.vue","cGFnZXMvdXNlci91c2VyLnZ1ZQ"],"sourcesContent":["<template>\n\t<view id=\"user\" class=\"bg-color\">\n\t\t<view class=\"user-info\">\r\n\t\t\t<view class=\"upper\">\r\n\t\t\t\t<image class=\"avatar\" src=\"/static/avatar-default.png\" /> \r\n\t\t\t\t<view class=\"name-block\">\r\n\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t{{user.studentName || user.teacherName}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"career\">\r\n\t\t\t\t\t\t{{user.role == 'student' ? '学生' : '教师'}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"lower\">\r\n\t\t\t\t<!-- <view class=\"info-detail\">\r\n\t\t\t\t\t学校：厦门大学\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<view class=\"info-detail\">\r\n\t\t\t\t\t学院：{{ user.department }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"user.major\" class=\"info-detail\">\r\n\t\t\t\t\t专业：{{ user.major }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"user.grade\" class=\"info-detail\">\r\n\t\t\t\t\t年级：{{ user.grade }}级\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"action-block\" >\r\n\t\t\t<view class=\"item\" @tap=\"gotoPageModifyInfo\">\r\n\t\t\t\t<image class=\"icon\" src=\"/static/tabBar-icon/courses-h.png\" />\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t修改信息\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"item\" @tap=\"gotoPageModifyPassword\">\r\n\t\t\t\t<image class=\"icon\" src=\"/static/tabBar-icon/courses-h.png\" />\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t修改密码\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"item\">\r\n\t\t\t\t<image class=\"icon\" src=\"/static/tabBar-icon/courses-h.png\" />\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t关于\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"item\" @tap=\"logout\">\r\n\t\t\t\t<image class=\"icon\" src=\"/static/tabBar-icon/courses-h.png\" />\r\n\t\t\t\t<view class=\"text\" style=\"color: red;\">\r\n\t\t\t\t\t重新登录\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { globalData } from '@/utils/config.js'\r\n\r\nconst user = ref({});\r\n\r\nconst userInfo = uni.getStorageSync('userInfo');\r\n\r\nuni.request({\r\n\turl: globalData.baseUrl + '/user/getInfo/' + userInfo.token,\r\n\theader: {\r\n\t\t'Content-Type': 'application/json'\r\n\t},\r\n\tsuccess: (res) => {\r\n\t\tconst backData = res.data;\r\n\t\tif(backData.code === 0) {\r\n\t\t\tuser.value = backData.data;\r\n\t\t\t// console.log(user.value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"认证错误，请重新登录\",\r\n\t\t\t\ticon: \"error\"\r\n\t\t\t});\r\n\t\t\tuni.removeStorageSync(\"userInfo\");\r\n\t\t\tuni.redirectTo({\r\n\t\t\t    url: \"/pages/user/login\" \r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tfail: (e)=> {\r\n\t\tuni.showToast({ title: \"网络异常\", icon: 'error' })\r\n\t}\r\n})\t\r\n\r\nconst logout = () => {\r\n\t// 清除本地存储的用户信息\r\n\tuni.removeStorageSync('userInfo');\r\n\t// 跳转到登录页面\r\n\tuni.redirectTo({\r\n\t    url: '/pages/user/login'\r\n\t});\r\n}\r\n\r\nconst gotoPageModifyInfo = () => {\r\n\tif(user.value.role == 'student') {\r\n\t\tuni.navigateTo({\r\n\t\t    url: '/pages/user/modify-student'\r\n\t\t});\r\n\t}\r\n\t\r\n}\r\n\r\nconst gotoPageModifyPassword = () => {\r\n\tuni.navigateTo({\r\n\t    url: '/pages/user/modify-password'\r\n\t});\r\n}\r\n\n</script>\n\n<style lang=\"less\" scoped>\n#user{\r\n\t.user-info {\r\n\t\tmargin: 30rpx 0;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: 1rpx solid #ccc;\r\n\t\tborder-bottom: 1rpx solid #ccc;\r\n\t\t.upper{\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\t.avatar{\r\n\t\t\t\twidth: 150rpx;\r\n\t\t\t\theight: 150rpx;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t}\r\n\t\t\t.name-block{\r\n\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t.name{\r\n\t\t\t\t\tfont-size: 50rpx;\r\n\t\t\t\t\tletter-spacing: 5rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.career{\r\n\t\t\t\t\tfont-size: 35rpx;\r\n\t\t\t\t\tcolor: #8b8b8b;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.lower{\r\n\t\t\t.info-detail{\r\n\t\t\t\tfont-size: 35rpx;\r\n\t\t\t\tline-height: 50rpx;\r\n\t\t\t\tcolor: #8b8b8b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.action-block{\r\n\t\tmargin: 50rpx 0;\r\n\t\t.item{\r\n\t\t\theight: 100rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-top: 1rpx solid #ccc;\r\n\t\t\tborder-bottom: 1rpx solid #ccc;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\t\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.icon{\r\n\t\t\t\theight: 75rpx;\r\n\t\t\t\twidth: 75rpx;\r\n\t\t\t}\r\n\t\t\t.text{\r\n\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\tline-height: 100rpx;\r\n\t\t\t}\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: '›'; /* 右箭头符号 */\r\n\t\t\t\tmargin-left: auto; /* 让箭头靠右 */\r\n\t\t\t\tfont-size: 70rpx;\r\n\t\t\t\tcolor: #ccc;\r\n\t\t  }\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'C:/Users/19253/Desktop/AI-UniApp/ClientUniApp/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;IAiEA,IAAMA,IAAA,GAAOC,aAAA,CAAAC,GAAA,CAAI,EAAE;IAEnB,IAAMC,QAAA,GAAWF,aAAA,CAAGG,KAAA,CAACC,cAAA,CAAe,UAAU;IAE9CJ,aAAA,CAAGG,KAAA,CAACE,OAAA,CAAQ;MACXC,GAAA,EAAKC,YAAA,CAAAC,UAAA,CAAWC,OAAA,GAAU,mBAAmBP,QAAA,CAASQ,KAAA;MACtDC,MAAA,EAAQ;QACP,gBAAgB;MAChB;MACDC,OAAA,EAAS,SAATA,QAAUC,GAAA,EAAQ;QACjB,IAAMC,QAAA,GAAWD,GAAA,CAAIE,IAAA;QACrB,IAAGD,QAAA,CAASE,IAAA,KAAS,GAAG;UACvBjB,IAAA,CAAKkB,KAAA,GAAQH,QAAA,CAASC,IAAA;QAEtB,OACI;UACJf,aAAA,CAAAG,KAAA,CAAIe,SAAA,CAAU;YACbC,KAAA,EAAO;YACPC,IAAA,EAAM;UACV,CAAI;UACDpB,aAAA,CAAAG,KAAA,CAAIkB,iBAAA,CAAkB,UAAU;UAChCrB,aAAA,CAAAG,KAAA,CAAImB,UAAA,CAAW;YACXhB,GAAA,EAAK;UACZ,CAAI;QACD;MACD;MACDiB,IAAA,EAAM,SAANA,KAAOC,CAAA,EAAK;QACXxB,aAAA,CAAGG,KAAA,CAACe,SAAA,CAAU;UAAEC,KAAA,EAAO;UAAQC,IAAA,EAAM;QAAA,CAAS;MAC9C;IACF,CAAC;IAED,IAAMK,MAAA,GAAS,SAATA,OAAA,EAAe;MAEpBzB,aAAA,CAAAG,KAAA,CAAIkB,iBAAA,CAAkB,UAAU;MAEhCrB,aAAA,CAAAG,KAAA,CAAImB,UAAA,CAAW;QACXhB,GAAA,EAAK;MACV,CAAE;IACF;IAEA,IAAMoB,kBAAA,GAAqB,SAArBA,mBAAA,EAA2B;MAChC,IAAG3B,IAAA,CAAKkB,KAAA,CAAMU,IAAA,IAAQ,WAAW;QAChC3B,aAAA,CAAAG,KAAA,CAAIyB,UAAA,CAAW;UACXtB,GAAA,EAAK;QACX,CAAG;MACD;IAEF;IAEA,IAAMuB,sBAAA,GAAyB,SAAzBA,uBAAA,EAA+B;MACpC7B,aAAA,CAAAG,KAAA,CAAIyB,UAAA,CAAW;QACXtB,GAAA,EAAK;MACV,CAAE;IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHAwB,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}